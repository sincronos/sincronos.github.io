<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Como criar gráficos e alertas no Tetra Sonar | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Tetra Sonar - Formato de consultas e tipos de gráficosPara abastecer os dados através de uma consulta SQL no Tetra Sonar o suporte deverá tomar alguns cuidados ao fazer a consulta e definir qual o grá">
<meta name="keywords" content="TetraSonar">
<meta property="og:type" content="article">
<meta property="og:title" content="Como criar gráficos e alertas no Tetra Sonar">
<meta property="og:url" content="http://sincronos.github.io/2019/08/28/Como-criar-graficos-e-alertas-no-Tetra-Sonar/index.html">
<meta property="og:site_name">
<meta property="og:description" content="Tetra Sonar - Formato de consultas e tipos de gráficosPara abastecer os dados através de uma consulta SQL no Tetra Sonar o suporte deverá tomar alguns cuidados ao fazer a consulta e definir qual o grá">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/2R2bxMf.png?e=1617235479&token=your qiniu access key:vf033Le9elo9gJDBDwvwhfgyUMI=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/ENeCM2M.png?e=1617235479&token=your qiniu access key:UItKEWS5TcnJjdr1KtK4VVXdtrI=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/nquRKBS.png?e=1617235479&token=your qiniu access key:9066pT0hyFDQIUvlXuvpcRNYzcc=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/22LPv5k.png?e=1617235479&token=your qiniu access key:axOfiwUrekgMLcmkXflabQ4a-88=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/8q1LMJX.png?e=1617235479&token=your qiniu access key:odcEZDLbAuCMouYdjqsY5N5CvEk=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/RO7T4Ox.png?e=1617235479&token=your qiniu access key:OebMc9Se9hbXEb_-qAvJhTGyQ68=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/O5KcbJG.png?e=1617235479&token=your qiniu access key:UGk03QqXQ-0grfio_nMCIOyY8x0=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/UwNcgBn.png?e=1617235479&token=your qiniu access key:Y1O-amxzv8ssQQVlWOmS8RX2ee4=">
<meta property="og:image" content="http://you img base url/https://i.imgur.com/Ed0BeEo.png?e=1617235479&token=your qiniu access key:tpESqDsCfpynOA14LZMgUi7wHdo=">
<meta property="og:updated_time" content="2021-02-24T19:46:43.224Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Como criar gráficos e alertas no Tetra Sonar">
<meta name="twitter:description" content="Tetra Sonar - Formato de consultas e tipos de gráficosPara abastecer os dados através de uma consulta SQL no Tetra Sonar o suporte deverá tomar alguns cuidados ao fazer a consulta e definir qual o grá">
<meta name="twitter:image" content="http://you img base url/https://i.imgur.com/2R2bxMf.png?e=1617235479&token=your qiniu access key:vf033Le9elo9gJDBDwvwhfgyUMI=">
  
    <link rel="alternate" href="/atom.xml" title type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://sincronos.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Como-criar-graficos-e-alertas-no-Tetra-Sonar" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/28/Como-criar-graficos-e-alertas-no-Tetra-Sonar/" class="article-date">
  <time datetime="2019-08-28T13:35:37.000Z" itemprop="datePublished">2019-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Como criar gráficos e alertas no Tetra Sonar
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Tetra-Sonar-Formato-de-consultas-e-tipos-de-graficos"><a href="#Tetra-Sonar-Formato-de-consultas-e-tipos-de-graficos" class="headerlink" title="Tetra Sonar - Formato de consultas e tipos de gráficos"></a>Tetra Sonar - Formato de consultas e tipos de gráficos</h1><p>Para abastecer os dados através de uma consulta SQL no <strong>Tetra Sonar</strong> o suporte deverá tomar alguns cuidados ao fazer a consulta e definir qual o gráfico sera mostrado.</p>
<p>Basicamente existem 2 tipos de formato de consulta para abastecer os gráficos.</p>
<h2 id="Formato-com-2-parametros"><a href="#Formato-com-2-parametros" class="headerlink" title="Formato com 2 parametros"></a>Formato com 2 parametros</h2><h3 id="Para-os-graficos"><a href="#Para-os-graficos" class="headerlink" title="Para os gráficos:"></a>Para os gráficos:</h3><ul>
<li>pizza</li>
<li>rosca</li>
<li>polar</li>
<li>radar</li>
<li>lista</li>
</ul>
<p>Todas a consultas devem gerar um resultado com duas colunas nomeadas como:</p>
<ol>
<li><strong>label</strong> - aonde estará os rótulos dos dados.</li>
<li><strong>value</strong> - onde está os valores de cada rótulo.</li>
</ol>
<h3 id="Exemplo"><a href="#Exemplo" class="headerlink" title="Exemplo:"></a>Exemplo:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TOP (<span class="number">4</span>) <span class="keyword">MAX</span>(sub.NOME) <span class="keyword">AS</span> label,</span><br><span class="line"><span class="keyword">SUM</span>(rz.QUANT * rz.UNITARIO * - <span class="number">1</span>) <span class="keyword">AS</span> <span class="keyword">value</span></span><br><span class="line"><span class="keyword">FROM</span> dbo.RAZALOJA <span class="keyword">AS</span> rz <span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line">dbo.ESTOQUE <span class="keyword">AS</span> e <span class="keyword">ON</span> rz.CODIGO = e.CODIGO <span class="keyword">AND</span> rz.MOVTO = <span class="string">'VE'</span></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> dbo.SUBGRUPO <span class="keyword">AS</span> sub <span class="keyword">ON</span> e.SUBGRUPO = sub.CODIGO</span><br><span class="line"><span class="keyword">WHERE</span> (rz.DATA <span class="keyword">BETWEEN</span> @InicioSemana <span class="keyword">AND</span> @FinalSemana)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sub.CODIGO</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">SUM</span>(rz.QUANT * rz.UNITARIO * - <span class="number">1</span>) <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<h2 id="Graficos"><a href="#Graficos" class="headerlink" title="Gráficos"></a>Gráficos</h2><p><strong>Lista</strong></p>
<p>Esse formato é no formato de tabela normal. Uma tabela com duas colunas. Onde o o <em>label</em> é o rótulo da linha e o <em>value</em> é o valor capturado.</p>
<p><img src="http://you img base url/https://i.imgur.com/2R2bxMf.png?e=1617235479&token=your qiniu access key:vf033Le9elo9gJDBDwvwhfgyUMI=" alt></p>
<p><strong>Rosca</strong><br><img src="http://you img base url/https://i.imgur.com/ENeCM2M.png?e=1617235479&token=your qiniu access key:UItKEWS5TcnJjdr1KtK4VVXdtrI=" alt></p>
<hr>
<p><strong>Pizza</strong><br><img src="http://you img base url/https://i.imgur.com/nquRKBS.png?e=1617235479&token=your qiniu access key:9066pT0hyFDQIUvlXuvpcRNYzcc=" alt></p>
<hr>
<p><strong>Polar</strong><br><img src="http://you img base url/https://i.imgur.com/22LPv5k.png?e=1617235479&token=your qiniu access key:axOfiwUrekgMLcmkXflabQ4a-88=" alt></p>
<hr>
<p><strong>Radar</strong><br><img src="http://you img base url/https://i.imgur.com/8q1LMJX.png?e=1617235479&token=your qiniu access key:odcEZDLbAuCMouYdjqsY5N5CvEk=" alt></p>
<hr>
<h2 id="Formato-com-3-parametros"><a href="#Formato-com-3-parametros" class="headerlink" title="Formato com 3 parametros"></a>Formato com 3 parametros</h2><h3 id="Para-os-graficos-1"><a href="#Para-os-graficos-1" class="headerlink" title="Para os gráficos:"></a>Para os gráficos:</h3><ul>
<li>barra</li>
<li>linha</li>
<li>barra horizontal</li>
<li>barra linha</li>
</ul>
<p>Todas a consultas devem gerar um resultado com duas colunas nomeadas como:</p>
<ol>
<li><strong>label</strong> - aonde estará os rótulos dos dados. <em>Ex: [Jan, Fev, Mar]</em></li>
<li><strong>bar</strong> - sessao do dado apresentado. Ex: <em>[Compra, Venda, Devolucoes]</em></li>
<li><strong>value</strong> - onde está os valores de cada rótulo.</li>
</ol>
<h3 id="Exemplo-1"><a href="#Exemplo-1" class="headerlink" title="Exemplo:"></a>Exemplo:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(POSICAO) + <span class="string">'-Pagar'</span> <span class="keyword">AS</span> label, <span class="string">'Projeção'</span> <span class="keyword">AS</span> bar, <span class="keyword">SUM</span>(VALOR) <span class="keyword">AS</span> <span class="keyword">value</span></span><br><span class="line"><span class="keyword">FROM</span> dbo.PAGAR</span><br><span class="line"><span class="keyword">WHERE</span> codfil = @codfil <span class="keyword">and</span>  (POSICAO = <span class="string">'AB'</span>)</span><br><span class="line"><span class="keyword">AND</span></span><br><span class="line">(VENCTO <span class="keyword">BETWEEN</span> <span class="keyword">DATEADD</span>(<span class="keyword">MONTH</span>, <span class="number">1</span>, <span class="keyword">DATEADD</span>(<span class="keyword">month</span>, <span class="keyword">DATEDIFF</span>(<span class="keyword">month</span>, <span class="number">0</span>, <span class="keyword">GETDATE</span>()), <span class="number">0</span>))</span><br><span class="line"><span class="keyword">AND</span></span><br><span class="line"><span class="keyword">DATEADD</span>(s, - <span class="number">1</span>, <span class="keyword">DATEADD</span>(mm, <span class="keyword">DATEDIFF</span>(m, <span class="number">0</span>, <span class="keyword">GETDATE</span>()) + <span class="number">2</span>, <span class="number">0</span>)))</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> POSICAO</span><br></pre></td></tr></table></figure>

<h2 id="Graficos-1"><a href="#Graficos-1" class="headerlink" title="Gráficos"></a>Gráficos</h2><p><strong>Barra</strong><br><img src="http://you img base url/https://i.imgur.com/RO7T4Ox.png?e=1617235479&token=your qiniu access key:OebMc9Se9hbXEb_-qAvJhTGyQ68=" alt></p>
<hr>
<p><strong>Linha</strong><br><img src="http://you img base url/https://i.imgur.com/O5KcbJG.png?e=1617235479&token=your qiniu access key:UGk03QqXQ-0grfio_nMCIOyY8x0=" alt></p>
<hr>
<p><strong>Barra Horizontal</strong><br><img src="http://you img base url/https://i.imgur.com/UwNcgBn.png?e=1617235479&token=your qiniu access key:Y1O-amxzv8ssQQVlWOmS8RX2ee4=" alt></p>
<hr>
<p><strong>Barra Linha</strong><br><img src="http://you img base url/https://i.imgur.com/Ed0BeEo.png?e=1617235479&token=your qiniu access key:tpESqDsCfpynOA14LZMgUi7wHdo=" alt></p>
<hr>
<h2 id="Formato-para-criar-ALARMES"><a href="#Formato-para-criar-ALARMES" class="headerlink" title="Formato para criar ALARMES"></a>Formato para criar ALARMES</h2><p>No caso de alarmes o SQL é um pouco diferente e deve se preocupar com alguns detalhes:</p>
<ol>
<li>Nao existem rótulos na consulta, ou seja, pode ser gerado quantas colunas forem necessárias. Deve se preocupar em colocar somente colunas que sejam relevantes pois será mostrado em dispositivos móveis aonde o tamanho de tela é reduzido;<br><strong>Portanto evitem usar no SQL o * para definir as colunas a serem consultadas na consulta</strong></li>
<li>O tempo definido para executar o alarme deve sem bem pensado. O intervalo deve SEMPRE contemplar um período suficiente para o usuário receber o alerta e tratar o problema antes do próximo monitoramento. Por exemplo: Um alarme de produtos com preco de venda com custo zero. Ao coletar os dados nao conformes ele somente deve ser executado dias após, para dar tempo de delegar a tarefa e ela ser corrigida. Se isso nao acontecer o alarme continuará executando gerando informacoes recorrentes denecessáriamente.</li>
</ol>
<h5 id="Exemplo-2"><a href="#Exemplo-2" class="headerlink" title="Exemplo:"></a>Exemplo:</h5><p><strong>Alarme</strong> - Monitar todos os produtos que tenham preco de venda e custo 0 no cadastro de produtos.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> codigo, nome, custo, venda, SITUACAO, cadastro</span><br><span class="line"><span class="keyword">from</span> estoque</span><br><span class="line"><span class="keyword">where</span> custo = <span class="number">0</span> <span class="keyword">and</span> situacao = <span class="string">'A'</span> <span class="keyword">and</span> venda &gt; <span class="number">0.05</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://sincronos.github.io/2019/08/28/Como-criar-graficos-e-alertas-no-Tetra-Sonar/" data-id="ckmy23sp60009q2i0jh5u6x0z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TetraSonar/">TetraSonar</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/02/03/conciliador-cartao/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CONCILIADOR de cartão
        
      </div>
    </a>
  
  
    <a href="/2019/07/26/Tetra-Sonar/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Tetra Sonar</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AlertaFiscal/">AlertaFiscal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Comanda/">Comanda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tetra-ComoTributar-ServicoTetra/">Tetra;ComoTributar;ServicoTetra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TetraSonar/">TetraSonar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fiscal/">fiscal</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AlertaFiscal/" style="font-size: 10px;">AlertaFiscal</a> <a href="/tags/Comanda/" style="font-size: 10px;">Comanda</a> <a href="/tags/Tetra-ComoTributar-ServicoTetra/" style="font-size: 10px;">Tetra;ComoTributar;ServicoTetra</a> <a href="/tags/TetraSonar/" style="font-size: 10px;">TetraSonar</a> <a href="/tags/fiscal/" style="font-size: 10px;">fiscal</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/31/Acerto/">Acerto Fiscal - Integração</a>
          </li>
        
          <li>
            <a href="/2021/03/31/GestaoSoftware/">Gestao de Software - Tetra</a>
          </li>
        
          <li>
            <a href="/2021/02/24/Audittar/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/02/19/Scantech/">SCANTECH</a>
          </li>
        
          <li>
            <a href="/2020/11/03/Clubiz/">CLUBIZ</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Carlos Viana<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>